<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>03 - Embedded Document Basics | SuperCamo - v0.4.5</title><meta name="description" content="Documentation for SuperCamo"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css?cache=1727315440391"/><link rel="stylesheet" href="../assets/highlight.css?cache=1727315440391"/><script defer src="../assets/main.js?cache=1727315440391"></script><script async src="../assets/icons.js?cache=1727315440391" id="tsd-icons-script"></script><script async src="../assets/search.js?cache=1727315440391" id="tsd-search-script"></script><script async src="../assets/navigation.js?cache=1727315440391" id="tsd-nav-script"></script><link rel="stylesheet" href="../assets/typedoc-github-style.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://github.com/BigfootDS/supercamo">GitHub Repository</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">SuperCamo - v0.4.5</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">SuperCamo</a></li><li><a href="The_Basics.html">The Basics</a></li><li><a href="The_Basics.03___Embedded_Document_Basics.html">03 - Embedded Document Basics</a></li></ul></div><div class="tsd-panel tsd-typography"><p>Subdocuments or embedded documents are a way of structuring complex data nested within documents. While a document can have objects as its properties/fields, it's typically more straightforward to create embedded documents to represent objects instead.</p>
<a id="md:declaring-embedded-documents" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Declaring Embedded Documents<a href="#md:declaring-embedded-documents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Embedded documents have their own validation step, so you can configure validation rules in a declared embedded document and they will run when the document that contains the embedded document runs. Might sound hard to keep track of, but basically: embedded documents are identical to regular documents, except you cannot use embedded documents as standalone documents. They can only exist as properties within documents.</p>
<p>For example:</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> {</span><span class="hl-4">NedbEmbeddedDocument</span><span class="hl-1">} = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;@bigfootds/supercamo&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">ISO6391</span><span class="hl-1"> = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;iso-639-1&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-6">allowedLanguageCodes</span><span class="hl-1"> = </span><span class="hl-4">ISO6391</span><span class="hl-1">.</span><span class="hl-0">getAllCodes</span><span class="hl-1">();</span><br/><br/><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-5">LocalizedContent</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-5">NedbEmbeddedDocument</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-3">constructor</span><span class="hl-1">(</span><span class="hl-6">data</span><span class="hl-1">, </span><span class="hl-6">databaseName</span><span class="hl-1">, </span><span class="hl-6">collectionName</span><span class="hl-1">){</span><br/><span class="hl-1">		</span><span class="hl-3">super</span><span class="hl-1">(</span><span class="hl-6">data</span><span class="hl-1">, </span><span class="hl-6">databaseName</span><span class="hl-1">, </span><span class="hl-6">collectionName</span><span class="hl-1">);</span><br/><br/><span class="hl-1">		</span><span class="hl-8">/**</span><br/><span class="hl-8">		 * A two-letter language code that matches the language of this subdocument&#39;s name and content.</span><br/><span class="hl-8">		 * Examples: &quot;EN&quot;, &quot;FR&quot;, &quot;DE&quot;</span><br/><span class="hl-8">		 * Refer to the ISO-639-1 standard online for the full list of usable codes.</span><br/><span class="hl-8">		 */</span><br/><span class="hl-1">		</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-6">language</span><span class="hl-1"> = {</span><br/><span class="hl-1">			</span><span class="hl-6">type:</span><span class="hl-1"> </span><span class="hl-6">String</span><span class="hl-1">,</span><br/><span class="hl-1">			</span><span class="hl-6">choices:</span><span class="hl-1"> </span><span class="hl-6">allowedLanguageCodes</span><span class="hl-1">,</span><br/><span class="hl-1">			</span><span class="hl-6">unique:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">			</span><span class="hl-6">required:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">		}</span><br/><br/><span class="hl-1">		</span><span class="hl-8">/**</span><br/><span class="hl-8">		 * Content written in the language assigned to this.language.</span><br/><span class="hl-8">		 */</span><br/><span class="hl-1">		</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-6">content</span><span class="hl-1"> = {</span><br/><span class="hl-1">			</span><span class="hl-6">type:</span><span class="hl-1"> </span><span class="hl-6">String</span><span class="hl-1">,</span><br/><span class="hl-1">			</span><span class="hl-6">required:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">			</span><span class="hl-6">unique:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">		}</span><br/><span class="hl-1">	}</span><br/><br/><span class="hl-1">}</span><br/><br/><br/><span class="hl-5">module</span><span class="hl-1">.</span><span class="hl-5">exports</span><span class="hl-1"> = { </span><span class="hl-6">LocalizedContent</span><span class="hl-1"> };</span>
</code><button type="button">Copy</button></pre>

<a id="md:usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Usage<a href="#md:usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The embedded document above provides a way to structure localized content. So, an Article document would then use the LocalizedContent embedded document like this - an array of localized content to represent article translations:</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> {</span><span class="hl-4">NedbDocument</span><span class="hl-1">} = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&quot;@bigfootds/supercamo&quot;</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">LocalizedContent</span><span class="hl-1"> } = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&quot;../subdocuments/LocalizedContent&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-5">Article</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-5">NedbDocument</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-3">constructor</span><span class="hl-1">(</span><span class="hl-6">data</span><span class="hl-1">, </span><span class="hl-6">databaseName</span><span class="hl-1">, </span><span class="hl-6">collectionName</span><span class="hl-1">){</span><br/><span class="hl-1">		</span><span class="hl-3">super</span><span class="hl-1">(</span><span class="hl-6">data</span><span class="hl-1">, </span><span class="hl-6">databaseName</span><span class="hl-1">, </span><span class="hl-6">collectionName</span><span class="hl-1">);</span><br/><span class="hl-1">		</span><br/><span class="hl-1">		</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-6">title</span><span class="hl-1"> = {</span><br/><span class="hl-1">			</span><span class="hl-6">type:</span><span class="hl-1"> [</span><span class="hl-6">LocalizedContent</span><span class="hl-1">],</span><br/><span class="hl-1">			</span><span class="hl-6">required:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">		}</span><br/><br/><span class="hl-1">		</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-6">body</span><span class="hl-1"> = {</span><br/><span class="hl-1">			</span><span class="hl-6">type:</span><span class="hl-1"> [</span><span class="hl-6">LocalizedContent</span><span class="hl-1">],</span><br/><span class="hl-1">			</span><span class="hl-6">required:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">		}</span><br/><br/><span class="hl-1">	}</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">module</span><span class="hl-1">.</span><span class="hl-5">exports</span><span class="hl-1"> = {</span><span class="hl-6">Article</span><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:querying-embedded-documents" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Querying Embedded Documents<a href="#md:querying-embedded-documents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>It may become a little bit trickier to conceptualize or visualize the queries you would then need to work with the Article documents, but you can use dot notation to reach down into the embedded document when querying. Like this:</p>
<pre><code class="js"><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-6">foundSpecificArticle</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">databaseInstance</span><span class="hl-1">.</span><span class="hl-0">findOneObject</span><span class="hl-1">(</span><br/><span class="hl-1">	</span><span class="hl-2">&quot;Articles&quot;</span><span class="hl-1">, </span><br/><span class="hl-1">	{ </span><br/><span class="hl-1">		</span><span class="hl-2">&quot;title.content&quot;</span><span class="hl-6">:</span><span class="hl-2">&quot;Some Imaginary Article&quot;</span><br/><span class="hl-1">	}, </span><br/><span class="hl-1">	</span><span class="hl-3">true</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>Embedded documents are not impacted by any document population settings - a query to a document will return all of its embedded document data.</p>
<p>This is because embedded documents are stored as objects within the containing document, and only convert back into Embedded Document instances during validation steps.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:declaring-embedded-documents"><span>Declaring <wbr/>Embedded <wbr/>Documents</span></a><a href="#md:usage"><span>Usage</span></a><a href="#md:querying-embedded-documents"><span>Querying <wbr/>Embedded <wbr/>Documents</span></a></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/BigfootDS/supercamo">GitHub Repository</a><a href="https://github.com/BigfootDS/supercamo" class="tsd-nav-link">GitHub Repository</a></nav><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>SuperCamo - v0.4.5</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a> with <a href="https://github.com/KillerJulian/typedoc-github-theme" target="_blank">typedoc-github-theme</a></p></footer><div class="overlay"></div></body></html>
