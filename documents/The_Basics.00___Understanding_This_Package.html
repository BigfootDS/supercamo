<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>00 - Understanding This Package | SuperCamo - v0.4.4</title><meta name="description" content="Documentation for SuperCamo"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css?cache=1727315390514"/><link rel="stylesheet" href="../assets/highlight.css?cache=1727315390514"/><script defer src="../assets/main.js?cache=1727315390514"></script><script async src="../assets/icons.js?cache=1727315390514" id="tsd-icons-script"></script><script async src="../assets/search.js?cache=1727315390514" id="tsd-search-script"></script><script async src="../assets/navigation.js?cache=1727315390514" id="tsd-nav-script"></script><link rel="stylesheet" href="../assets/typedoc-github-style.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://github.com/BigfootDS/supercamo">GitHub Repository</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">SuperCamo - v0.4.4</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">SuperCamo</a></li><li><a href="The_Basics.html">The Basics</a></li><li><a href="The_Basics.00___Understanding_This_Package.html">00 - Understanding This Package</a></li></ul></div><div class="tsd-panel tsd-typography"><p>SuperCamo is a package built as a wrapper around NeDB. It contains several key parts that you need to understand to really make good use of this package, and you would benefit from also digging around in NeDB package documentation - but we'll point that out when it's necessary in the other documentation pages.</p>
<p>This page will walk you through the key components of this package and briefly explain what they are, as well as when you need to use them.</p>
<p>There are a lot of moving pieces in this system. In a nutshell:</p>
<a id="md:the-supercamo-singleton" class="tsd-anchor"></a><h2 class="tsd-anchor-link">The SuperCamo singleton<a href="#md:the-supercamo-singleton" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This package is all about making it easier to manage multiple NeDB database connections within a single app's lifetime. The SuperCamo singleton is how that happens.</p>
<p>Essentially, you should connect to a database via the SuperCamo singleton. The <code>SuperCamo.connect()</code> function returns a reference to the database client instance, and that same instance can be retrieved again in any file that uses the SuperCamo singleton too.</p>
<p>A singleton is an essentially-global value - wherever you import the SuperCamo singleton, you will have access to the data stored in that singleton - even if the changes to that data happen in other files.</p>
<p>It means that one file can setup and connect to the database like this:</p>
<pre><code class="js"><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">connect</span><span class="hl-1">(){</span><br/><span class="hl-1">	</span><span class="hl-8">// Connect to the database</span><br/><span class="hl-1">	</span><span class="hl-6">databaseInstance</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">SuperCamo</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">(</span><br/><span class="hl-1">		</span><span class="hl-2">&quot;BasicExampleDatabase&quot;</span><span class="hl-1">, </span><br/><span class="hl-1">		</span><span class="hl-6">path</span><span class="hl-1">.</span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-6">process</span><span class="hl-1">.</span><span class="hl-0">cwd</span><span class="hl-1">(), </span><span class="hl-2">&quot;databases&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;BasicExampleDatabase&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">		[</span><br/><span class="hl-1">			{</span><span class="hl-6">name:</span><span class="hl-2">&quot;Users&quot;</span><span class="hl-1">, </span><span class="hl-6">model:User</span><span class="hl-1">},</span><br/><span class="hl-1">			{</span><span class="hl-6">name:</span><span class="hl-1"> </span><span class="hl-2">&quot;Articles&quot;</span><span class="hl-1">, </span><span class="hl-6">model:</span><span class="hl-1"> </span><span class="hl-6">Article</span><span class="hl-1">}</span><br/><span class="hl-1">		]</span><br/><span class="hl-1">	);</span><br/><span class="hl-1">	</span><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Database instance:&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">	</span><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-6">databaseInstance</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><span class="hl-0">connect</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>And then other files can refer to the database with code like this:</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">express</span><span class="hl-1"> = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&quot;express&quot;</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">router</span><span class="hl-1"> = </span><span class="hl-6">express</span><span class="hl-1">.</span><span class="hl-0">Router</span><span class="hl-1">();</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">SuperCamo</span><span class="hl-1"> = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&quot;@bigfootds/supercamo&quot;</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">databaseInstance</span><span class="hl-1"> = </span><span class="hl-6">SuperCamo</span><span class="hl-1">.</span><span class="hl-0">clientGet</span><span class="hl-1">(</span><span class="hl-2">&quot;BasicExampleDatabase&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-6">router</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&quot;/all&quot;</span><span class="hl-1">, </span><span class="hl-3">async</span><span class="hl-1"> (</span><span class="hl-6">request</span><span class="hl-1">, </span><span class="hl-6">response</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-6">availableArticles</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">databaseInstance</span><span class="hl-1">.</span><span class="hl-0">findManyObjects</span><span class="hl-1">(</span><span class="hl-2">&quot;Articles&quot;</span><span class="hl-1">, {});</span><br/><br/><span class="hl-1">	</span><span class="hl-6">response</span><span class="hl-1">.</span><span class="hl-0">json</span><span class="hl-1">(</span><span class="hl-6">availableArticles</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>Read more about the SuperCamo singleton on <a href="The_Basics.01___The_SuperCamo_Singleton.html">its tutorial page</a>.</p>
<a id="md:documents" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Documents<a href="#md:documents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Declaring a document is how you can define a schema or structure for your data.</p>
<p>Like so:</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> {</span><span class="hl-4">NedbDocument</span><span class="hl-1">} = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&quot;@bigfootds/supercamo&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-5">User</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-5">NedbDocument</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-3">constructor</span><span class="hl-1">(</span><span class="hl-6">data</span><span class="hl-1">, </span><span class="hl-6">databaseName</span><span class="hl-1">, </span><span class="hl-6">collectionName</span><span class="hl-1">){</span><br/><span class="hl-1">		</span><span class="hl-3">super</span><span class="hl-1">(</span><span class="hl-6">data</span><span class="hl-1">, </span><span class="hl-6">databaseName</span><span class="hl-1">, </span><span class="hl-6">collectionName</span><span class="hl-1">);</span><br/><span class="hl-1">		</span><br/><span class="hl-1">		</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-6">rules</span><span class="hl-1"> = {</span><br/><span class="hl-1">			</span><span class="hl-6">username:</span><span class="hl-1"> {</span><br/><span class="hl-1">				</span><span class="hl-6">type:</span><span class="hl-1"> </span><span class="hl-6">String</span><span class="hl-1">,</span><br/><span class="hl-1">				</span><span class="hl-6">required:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">				</span><span class="hl-6">unique:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">			}</span><br/><span class="hl-1">		}</span><br/><br/><span class="hl-1">	}</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">module</span><span class="hl-1">.</span><span class="hl-5">exports</span><span class="hl-1"> = {</span><span class="hl-6">User</span><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>In the document declaration above, a <code>User</code> document is configured to have one field: a username. Its document data would look like this object in the NeDB datastore:</p>
<pre><code class="js"><span class="hl-1">{</span><br/><span class="hl-1">	</span><span class="hl-9">_id</span><span class="hl-1">: </span><span class="hl-2">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">	</span><span class="hl-9">username</span><span class="hl-1">: </span><span class="hl-2">&quot;&quot;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Everything else that's going on in that declaration is to enable and configure document validation. So, a username must be provided when creating a new User in the database, and that username must be unique.</p>
<p>The parameters in the constructor are managed by the NeDB database client - this means you should rarely (ideally never) work with documents directly, but instead through your NeDB database client instance.</p>
<p>Documents have support for document referencing and population, as well as validation and other operation event hooks.</p>
<p>Read more about the SuperCamo document on <a href="The_Basics.02___Document_Basics.html">its tutorial page</a>.</p>
<a id="md:subdocuments-or-embedded-documents" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Subdocuments or Embedded Documents<a href="#md:subdocuments-or-embedded-documents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Subdocuments or embedded documents are a way of structuring complex data nested within documents. While a document can have objects as its properties/fields, it's typically more straightforward to create embedded documents to represent objects instead.</p>
<p>Embedded documents have their own validation step, so you can configure validation rules in a declared embedded document and they will run when the document that contains the embedded document runs. Might sound hard to keep track of, but basically: embedded documents are identical to regular documents, except you cannot use embedded documents as standalone documents. They can only exist as properties within documents.</p>
<p>For example:</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> {</span><span class="hl-4">NedbEmbeddedDocument</span><span class="hl-1">} = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;@bigfootds/supercamo&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">ISO6391</span><span class="hl-1"> = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;iso-639-1&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-6">allowedLanguageCodes</span><span class="hl-1"> = </span><span class="hl-4">ISO6391</span><span class="hl-1">.</span><span class="hl-0">getAllCodes</span><span class="hl-1">();</span><br/><br/><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-5">LocalizedContent</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-5">NedbEmbeddedDocument</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-3">constructor</span><span class="hl-1">(</span><span class="hl-6">data</span><span class="hl-1">, </span><span class="hl-6">databaseName</span><span class="hl-1">, </span><span class="hl-6">collectionName</span><span class="hl-1">){</span><br/><span class="hl-1">		</span><span class="hl-3">super</span><span class="hl-1">(</span><span class="hl-6">data</span><span class="hl-1">, </span><span class="hl-6">databaseName</span><span class="hl-1">, </span><span class="hl-6">collectionName</span><span class="hl-1">);</span><br/><br/><span class="hl-1">		</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-6">rules</span><span class="hl-1"> = {</span><br/><span class="hl-1">			</span><span class="hl-8">/**</span><br/><span class="hl-8">			 * A two-letter language code that matches the language of this subdocument&#39;s name and content.</span><br/><span class="hl-8">			 * Examples: &quot;EN&quot;, &quot;FR&quot;, &quot;DE&quot;</span><br/><span class="hl-8">			 * Refer to the ISO-639-1 standard online for the full list of usable codes.</span><br/><span class="hl-8">			 */</span><br/><span class="hl-1">			</span><span class="hl-6">language:</span><span class="hl-1"> {</span><br/><span class="hl-1">				</span><span class="hl-6">type:</span><span class="hl-1"> </span><span class="hl-6">String</span><span class="hl-1">,</span><br/><span class="hl-1">				</span><span class="hl-6">choices:</span><span class="hl-1"> </span><span class="hl-6">allowedLanguageCodes</span><span class="hl-1">,</span><br/><span class="hl-1">				</span><span class="hl-6">unique:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">				</span><span class="hl-6">required:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">			},</span><br/><span class="hl-1">			</span><span class="hl-8">/**</span><br/><span class="hl-8">			 * Content written in the language assigned to this.language.</span><br/><span class="hl-8">			 */</span><br/><span class="hl-1">			</span><span class="hl-6">content:</span><span class="hl-1"> {</span><br/><span class="hl-1">				</span><span class="hl-6">type:</span><span class="hl-1"> </span><span class="hl-6">String</span><span class="hl-1">,</span><br/><span class="hl-1">				</span><span class="hl-6">required:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">				</span><span class="hl-6">unique:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">			}</span><br/><span class="hl-1">		}</span><br/><span class="hl-1">	}</span><br/><span class="hl-1">}</span><br/><br/><br/><span class="hl-5">module</span><span class="hl-1">.</span><span class="hl-5">exports</span><span class="hl-1"> = { </span><span class="hl-6">LocalizedContent</span><span class="hl-1"> };</span>
</code><button type="button">Copy</button></pre>

<p>The embedded document above provides a way to structure localized content. A document that uses this embedded document would be able to store translated and localized data by declaring a property that uses an array of LocalizedContent as its <code>type</code>.</p>
<p>Read more about embedded documents on <a href="The_Basics.03___Embedded_Document_Basics.html">its tutorial page</a>.</p>
<a id="md:database-client" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Database Client<a href="#md:database-client" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>As we've seen in the snippets of code so far, we use SuperCamo to create a connection to a database and work with the database instance that SuperCamo returns to us. We can retrieve this database instance again and again in any file by using the SuperCamo singleton, and then any database operations we want to do should be performed on that database client instance.</p>
<p>The database client is built with a focus on <code>async</code> functionality. Database operations take time. Beyond that, the database client provides a variety of methods to allow you to carry out typical database operations.</p>
<p>Read more about the SuperCamo database client on <a href="The_Basics.04___DB_Client_Basics.html">its tutorial page</a>.</p>
<a id="md:summary" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Summary<a href="#md:summary" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>So, those are the four main components to SuperCamo. If that sounds interesting to you, keep digging into this documentation and start coding!</p>
<p>Go and <a href="../00%20-%20QuickStart.md">get started!</a></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:the-supercamo-singleton"><span>The <wbr/>Super<wbr/>Camo singleton</span></a><a href="#md:documents"><span>Documents</span></a><a href="#md:subdocuments-or-embedded-documents"><span>Subdocuments or <wbr/>Embedded <wbr/>Documents</span></a><a href="#md:database-client"><span>Database <wbr/>Client</span></a><a href="#md:summary"><span>Summary</span></a></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/BigfootDS/supercamo">GitHub Repository</a><a href="https://github.com/BigfootDS/supercamo" class="tsd-nav-link">GitHub Repository</a></nav><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>SuperCamo - v0.4.4</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a> with <a href="https://github.com/KillerJulian/typedoc-github-theme" target="_blank">typedoc-github-theme</a></p></footer><div class="overlay"></div></body></html>
